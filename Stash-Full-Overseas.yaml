# Stash Full Overseas (customized for dodo258)
# Keep functional groups + region auto/fallback/load-balance

mode: rule
log-level: info

dns:
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"

proxy-providers:
  Subscribe:
    # è¿™é‡Œæ”¹æˆä½ è‡ªå·±çš„è®¢é˜…åœ°å€ï¼ˆæ¨è sub-store èšåˆé“¾æ¥ï¼‰
    # ç¤ºä¾‹: http://sub.store/download/collection/ä½ çš„é›†åˆå?target=ClashMeta
    url: http://sub.store/download/collection/all?target=ClashMeta
    interval: 86400
    benchmark-url: http://www.gstatic.com/generate_204
    benchmark-timeout: 5

proxy-groups:
  - { name: Final, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png, proxies: [Proxy] }
  - { name: Proxy, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Rocket.png, proxies: [HongKong, TaiWan, Japan, Singapore, America, AllServer, DIRECT] }

  - { name: äº¤æ˜“é’±åŒ…, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Rocket.png, proxies: [Proxy, America, Singapore, Japan, HongKong, TaiWan, AllServer] }
  - { name: AI, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ChatGPT.png, proxies: [Proxy, America, Singapore, Japan, HongKong, TaiWan, AllServer] }
  - { name: æµåª’ä½“, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Streaming.png, proxies: [Proxy, Singapore, America, Japan, HongKong, TaiWan, AllServer] }
  - { name: ç¤¾äº¤å¹³å°, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/X.png, proxies: [Proxy, Japan, Singapore, America, HongKong, TaiWan, AllServer] }
  - { name: æ¸¸æˆå¹³å°, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Game.png, proxies: [Proxy, Japan, HongKong, Singapore, America, TaiWan, AllServer, DIRECT] }

  - { name: Telegram, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram_X.png, proxies: [Proxy, HongKong, Japan, Singapore, America, TaiWan, AllServer] }
  - { name: Google, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png, proxies: [Proxy, America, Singapore, Japan, HongKong, TaiWan, AllServer, DIRECT] }
  - { name: Microsoft, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Windows_11.png, proxies: [DIRECT, Proxy, America, Japan, Singapore, HongKong, TaiWan, AllServer] }
  - { name: Apple, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_1.png, proxies: [DIRECT, Proxy, HongKong, TaiWan, Japan, Singapore, America, AllServer] }

  # åœ°åŒºåˆ†ç»„ï¼ˆæ˜¾ç¤ºæ¨¡å¼ + å…¨éƒ¨åœ°åŒºçº¿è·¯ï¼‰
  - { name: HongKong, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png, proxies: [HK-Auto, HK-FallBack, HK-LoadBalance, HK-List] }
  - { name: TaiWan, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China.png, proxies: [TW-Auto, TW-FallBack, TW-LoadBalance, TW-List] }
  - { name: Japan, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png, proxies: [JP-Auto, JP-FallBack, JP-LoadBalance, JP-List] }
  - { name: Singapore, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png, proxies: [SG-Auto, SG-FallBack, SG-LoadBalance, SG-List] }
  - { name: America, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png, proxies: [US-Auto, US-FallBack, US-LoadBalance, US-List] }
  - { name: AllServer, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Airport.png, proxies: [All-Auto] }

  # åœ°åŒºçº¿è·¯åˆ—è¡¨ï¼ˆå¯ç›´æ¥çœ‹åˆ°è¯¥åœ°åŒºæ‰€æœ‰çº¿è·¯ï¼‰
  - { name: HK-List, type: select, include-all: true, filter: 'æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong '}
  - { name: TW-List, type: select, include-all: true, filter: 'å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan '}
  - { name: JP-List, type: select, include-all: true, filter: 'æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan '}
  - { name: SG-List, type: select, include-all: true, filter: 'æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore '}
  - { name: US-List, type: select, include-all: true, filter: 'ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|American '}

  # Hidden strategy groups
  - { name: HK-Auto, type: url-test, hidden: true, include-all: true, filter: 'æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong', interval: 300, lazy: true }
  - { name: TW-Auto, type: url-test, hidden: true, include-all: true, filter: 'å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan', interval: 300, lazy: true }
  - { name: JP-Auto, type: url-test, hidden: true, include-all: true, filter: 'æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan', interval: 300, lazy: true }
  - { name: SG-Auto, type: url-test, hidden: true, include-all: true, filter: 'æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore', interval: 300, lazy: true }
  - { name: US-Auto, type: url-test, hidden: true, include-all: true, filter: 'ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|American', interval: 300, lazy: true }

  - { name: HK-FallBack, type: fallback, hidden: true, include-all: true, filter: 'æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong', interval: 300, lazy: true }
  - { name: TW-FallBack, type: fallback, hidden: true, include-all: true, filter: 'å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan', interval: 300, lazy: true }
  - { name: JP-FallBack, type: fallback, hidden: true, include-all: true, filter: 'æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan', interval: 300, lazy: true }
  - { name: SG-FallBack, type: fallback, hidden: true, include-all: true, filter: 'æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore', interval: 300, lazy: true }
  - { name: US-FallBack, type: fallback, hidden: true, include-all: true, filter: 'ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|American', interval: 300, lazy: true }

  - { name: HK-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: 'æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong', strategy: consistent-hashing, interval: 300, lazy: true }
  - { name: TW-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: 'å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan', strategy: consistent-hashing, interval: 300, lazy: true }
  - { name: JP-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: 'æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan', strategy: consistent-hashing, interval: 300, lazy: true }
  - { name: SG-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: 'æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore', strategy: consistent-hashing, interval: 300, lazy: true }
  - { name: US-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: 'ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|American', strategy: consistent-hashing, interval: 300, lazy: true }

  - { name: All-Auto, type: url-test, hidden: true, include-all: true, filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥)).*$', interval: 300, lazy: true }

rule-providers:
  CryptoWallet: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/crypto-wallet.list }
  AIOverseas: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/ai.list }
  StreamingOverseas: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/streaming.list }
  SocialOverseas: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/social.list }
  GamesOverseas: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/games.list }
  AutoBackfill: { behavior: classical, format: text, interval: 3600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/auto-backfill.list }

  Direct: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list }
  Reject: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list }
  TelegramBase: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Telegram.list }
  GoogleBase: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list }
  MicrosoftBase: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list }
  AppleCN: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list }
  AppleServers: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list }
  CN_Mainland: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list }
  LAN: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list }

  BM7Telegram: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list }
  BM7Google: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.list }
  BM7Microsoft: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list }
  BM7Apple: { behavior: classical, format: text, interval: 86400, url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list }

rules:
  - RULE-SET,Direct,DIRECT
  - RULE-SET,Reject,REJECT

  - RULE-SET,CryptoWallet,äº¤æ˜“é’±åŒ…
  - RULE-SET,AIOverseas,AI
  - RULE-SET,StreamingOverseas,æµåª’ä½“
  - RULE-SET,SocialOverseas,ç¤¾äº¤å¹³å°
  - RULE-SET,GamesOverseas,æ¸¸æˆå¹³å°
  - RULE-SET,AutoBackfill,Proxy

  - RULE-SET,BM7Telegram,Telegram
  - RULE-SET,BM7Google,Google
  - RULE-SET,BM7Microsoft,Microsoft
  - RULE-SET,BM7Apple,Apple
  - RULE-SET,TelegramBase,Telegram
  - RULE-SET,GoogleBase,Google
  - RULE-SET,MicrosoftBase,Microsoft
  - RULE-SET,AppleCN,Apple
  - RULE-SET,AppleServers,Proxy

  - RULE-SET,CN_Mainland,DIRECT
  - RULE-SET,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Final
