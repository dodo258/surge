# Stash Full Overseas (customized for dodo258)
# Keep functional groups + region auto/fallback/load-balance

mode: rule
log-level: info

dns:
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"

proxy-providers:
  Subscribe:
    # ä½ çš„ sub-store èšåˆé“¾æ¥ï¼ˆæŒ‰éœ€æ›¿æ¢ï¼‰
    url: https://sub.store/download/collection/all?target=ClashMeta
    interval: 86400
    benchmark-url: http://www.gstatic.com/generate_204
    benchmark-timeout: 5

proxy-groups:
  - name: Final
    type: select
    proxies: [Proxy, DIRECT]

  - name: Proxy
    type: select
    proxies: [HongKong, TaiWan, Japan, Singapore, America, AllServer, DIRECT]

  - name: äº¤æ˜“é’±åŒ…
    type: select
    proxies: [Proxy, America, Singapore, Japan, HongKong, TaiWan, AllServer]
  - name: AI
    type: select
    proxies: [Proxy, America, Singapore, Japan, HongKong, TaiWan, AllServer]
  - name: æµåª’ä½“
    type: select
    proxies: [Proxy, Singapore, America, Japan, HongKong, TaiWan, AllServer]
  - name: ç¤¾äº¤å¹³å°
    type: select
    proxies: [Proxy, Japan, Singapore, America, HongKong, TaiWan, AllServer]
  - name: æ¸¸æˆå¹³å°
    type: select
    proxies: [Proxy, Japan, HongKong, Singapore, America, TaiWan, AllServer, DIRECT]

  - name: Telegram
    type: select
    proxies: [Proxy, HongKong, Japan, Singapore, America, TaiWan, AllServer]
  - name: Google
    type: select
    proxies: [Proxy, America, Singapore, Japan, HongKong, TaiWan, AllServer, DIRECT]
  - name: Microsoft
    type: select
    proxies: [DIRECT, Proxy, America, Japan, Singapore, HongKong, TaiWan, AllServer]
  - name: Apple
    type: select
    proxies: [DIRECT, Proxy, HongKong, TaiWan, Japan, Singapore, America, AllServer]

  # Region groups (you can click and see HK-Auto/HK-FallBack/HK-LoadBalance)
  - name: HongKong
    type: select
    proxies: [HK-Auto, HK-FallBack, HK-LoadBalance]
    filter: æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong
    use: [Subscribe]
  - name: TaiWan
    type: select
    proxies: [TW-Auto, TW-FallBack, TW-LoadBalance]
    filter: å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan
    use: [Subscribe]
  - name: Japan
    type: select
    proxies: [JP-Auto, JP-FallBack, JP-LoadBalance]
    filter: æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan
    use: [Subscribe]
  - name: Singapore
    type: select
    proxies: [SG-Auto, SG-FallBack, SG-LoadBalance]
    filter: æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore
    use: [Subscribe]
  - name: America
    type: select
    proxies: [US-Auto, US-FallBack, US-LoadBalance]
    filter: ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|American
    use: [Subscribe]
  - name: AllServer
    type: select
    proxies: [All-Auto]
    filter: ^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|(\b(USE|USED|TOTAL|Traffic|Expire|EMAIL|Panel|Channel|Author)\b|(\d{4}-\d{2}-\d{2}|\d+G)))).*$
    use: [Subscribe]

  # Hidden strategy groups
  - { name: HK-Auto, type: url-test, hidden: true, include-all: true, filter: æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong, interval: 300, lazy: true }
  - { name: TW-Auto, type: url-test, hidden: true, include-all: true, filter: å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan, interval: 300, lazy: true }
  - { name: JP-Auto, type: url-test, hidden: true, include-all: true, filter: æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan, interval: 300, lazy: true }
  - { name: SG-Auto, type: url-test, hidden: true, include-all: true, filter: æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore, interval: 300, lazy: true }
  - { name: US-Auto, type: url-test, hidden: true, include-all: true, filter: ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|American, interval: 300, lazy: true }

  - { name: HK-FallBack, type: fallback, hidden: true, include-all: true, filter: æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong, interval: 300, lazy: true }
  - { name: TW-FallBack, type: fallback, hidden: true, include-all: true, filter: å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan, interval: 300, lazy: true }
  - { name: JP-FallBack, type: fallback, hidden: true, include-all: true, filter: æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan, interval: 300, lazy: true }
  - { name: SG-FallBack, type: fallback, hidden: true, include-all: true, filter: æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore, interval: 300, lazy: true }
  - { name: US-FallBack, type: fallback, hidden: true, include-all: true, filter: ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|American, interval: 300, lazy: true }

  - { name: HK-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong, strategy: consistent-hashing, interval: 300, lazy: true }
  - { name: TW-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan, strategy: consistent-hashing, interval: 300, lazy: true }
  - { name: JP-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan, strategy: consistent-hashing, interval: 300, lazy: true }
  - { name: SG-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore, strategy: consistent-hashing, interval: 300, lazy: true }
  - { name: US-LoadBalance, type: load-balance, hidden: true, include-all: true, filter: ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|American, strategy: consistent-hashing, interval: 300, lazy: true }

  - { name: All-Auto, type: url-test, hidden: true, include-all: true, filter: ^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|(\b(USE|USED|TOTAL|Traffic|Expire|EMAIL|Panel|Channel|Author)\b|(\d{4}-\d{2}-\d{2}|\d+G)))).*$, interval: 300, lazy: true }

rule-providers:
  CryptoWallet: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/crypto-wallet.list }
  AIOverseas: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/ai.list }
  StreamingOverseas: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/streaming.list }
  SocialOverseas: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/social.list }
  GamesOverseas: { behavior: classical, format: text, interval: 21600, url: https://raw.githubusercontent.com/dodo258/surge/main/custom-rules/games.list }

  Direct: { behavior: classical, format: text, interval: 86400, url: https://github.com/Repcz/Tool/raw/X/Stash/Rules/Direct.list }
  Reject: { behavior: classical, format: text, interval: 86400, url: https://github.com/Repcz/Tool/raw/X/Stash/Rules/Reject.list }
  TelegramBase: { behavior: classical, format: text, interval: 86400, url: https://github.com/Repcz/Tool/raw/X/Stash/Rules/Telegram.list }
  GoogleBase: { behavior: classical, format: text, interval: 86400, url: https://github.com/Repcz/Tool/raw/X/Stash/Rules/Google.list }
  MicrosoftBase: { behavior: classical, format: text, interval: 86400, url: https://github.com/Repcz/Tool/raw/X/Stash/Rules/Microsoft.list }
  AppleCN: { behavior: classical, format: text, interval: 86400, url: https://github.com/Repcz/Tool/raw/X/Stash/Rules/AppleCN.list }
  AppleServers: { behavior: classical, format: text, interval: 86400, url: https://github.com/Repcz/Tool/raw/X/Stash/Rules/AppleServers.list }
  CN_Mainland: { behavior: classical, format: text, interval: 86400, url: https://github.com/Repcz/Tool/raw/X/Stash/Rules/ChinaDomain.list }
  LAN: { behavior: classical, format: text, interval: 86400, url: https://github.com/Repcz/Tool/raw/X/Stash/Rules/Lan.list }

rules:
  - RULE-SET,Direct,DIRECT
  - RULE-SET,Reject,REJECT

  - RULE-SET,CryptoWallet,äº¤æ˜“é’±åŒ…
  - RULE-SET,AIOverseas,AI
  - RULE-SET,StreamingOverseas,æµåª’ä½“
  - RULE-SET,SocialOverseas,ç¤¾äº¤å¹³å°
  - RULE-SET,GamesOverseas,æ¸¸æˆå¹³å°

  - RULE-SET,TelegramBase,Telegram
  - RULE-SET,GoogleBase,Google
  - RULE-SET,MicrosoftBase,Microsoft
  - RULE-SET,AppleCN,Apple
  - RULE-SET,AppleServers,Proxy

  - RULE-SET,CN_Mainland,DIRECT
  - RULE-SET,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Final
